using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.Windows.Forms;

namespace Bai_5
{
    public partial class formAdd : Form
    {
        public formAdd()
        {
            InitializeComponent();
            khoa_text.Items.Add("Công nghệ thông tin");
            khoa_text.Items.Add("Công nghệ phần mềm");
        }
        string khoa;

        // Public property to expose the created SinhVien to the caller
        public SinhVien NewSinhVien { get; private set; }

        public class SinhVien
        {
            public string MaSoSinhVien { get; set; }
            public string TenSinhVien { get; set; }
            public string Khoa { get; set; }
            public double DiemTB { get; set; }

        }

        private void label2_Click(object sender, EventArgs e)
        {

        }

        private void label3_Click(object sender, EventArgs e)
        {

        }

        private void comboBox1_SelectedIndexChanged(object sender, EventArgs e)
        {
            khoa = khoa_text.SelectedItem.ToString();
        }

        private void button2_Click(object sender, EventArgs e)
        {
            this.Close();
        }

        private void button1_Click(object sender, EventArgs e)
        {
            // Validate DiemTB
            if (!double.TryParse(dtb_text.Text, out double diem))
            {
                MessageBox.Show("Điểm trung bình không hợp lệ.", "Lỗi", MessageBoxButtons.OK, MessageBoxIcon.Error);
                return;
            }

            SinhVien svMoi = new SinhVien
            {
                MaSoSinhVien = mssv_text.Text,
                TenSinhVien = name_text.Text,
                Khoa = khoa,
                DiemTB = diem
            };

            // Store the created object and signal success to the caller
            NewSinhVien = svMoi;
            this.DialogResult = DialogResult.OK;
            this.Close();
        }
    }
}
